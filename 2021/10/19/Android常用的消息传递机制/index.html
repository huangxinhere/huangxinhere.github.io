<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>Android常用的消息传递机制 | Hx's blog</title><meta name="author" content="(●ˇ∀ˇ●),1159390360@qq.com"><meta name="copyright" content="(●ˇ∀ˇ●)"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="Android常用的消息传递机制">
<meta property="og:type" content="article">
<meta property="og:title" content="Android常用的消息传递机制">
<meta property="og:url" content="https://huangxinhere.github.io/2021/10/19/Android%E5%B8%B8%E7%94%A8%E7%9A%84%E6%B6%88%E6%81%AF%E4%BC%A0%E9%80%92%E6%9C%BA%E5%88%B6/index.html">
<meta property="og:site_name" content="Hx&#39;s blog">
<meta property="og:description" content="Android常用的消息传递机制">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://huangxinhere.github.io/img/message_pic.jpg">
<meta property="article:published_time" content="2021-10-18T16:00:00.000Z">
<meta property="article:modified_time" content="2022-04-09T11:41:10.382Z">
<meta property="article:author" content="(●ˇ∀ˇ●)">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://huangxinhere.github.io/img/message_pic.jpg"><script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Android常用的消息传递机制",
  "url": "https://huangxinhere.github.io/2021/10/19/Android%E5%B8%B8%E7%94%A8%E7%9A%84%E6%B6%88%E6%81%AF%E4%BC%A0%E9%80%92%E6%9C%BA%E5%88%B6/",
  "image": "https://huangxinhere.github.io/img/message_pic.jpg",
  "datePublished": "2021-10-18T16:00:00.000Z",
  "dateModified": "2022-04-09T11:41:10.382Z",
  "author": [
    {
      "@type": "Person",
      "name": "(●ˇ∀ˇ●)",
      "url": "https://huangxinhere.github.io"
    }
  ]
}</script><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="https://huangxinhere.github.io/2021/10/19/Android%E5%B8%B8%E7%94%A8%E7%9A%84%E6%B6%88%E6%81%AF%E4%BC%A0%E9%80%92%E6%9C%BA%E5%88%B6/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><script>
    (() => {
      
    const saveToLocal = {
      set: (key, value, ttl) => {
        if (!ttl) return
        const expiry = Date.now() + ttl * 86400000
        localStorage.setItem(key, JSON.stringify({ value, expiry }))
      },
      get: key => {
        const itemStr = localStorage.getItem(key)
        if (!itemStr) return undefined
        const { value, expiry } = JSON.parse(itemStr)
        if (Date.now() > expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return value
      }
    }

    window.btf = {
      saveToLocal,
      getScript: (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        Object.entries(attr).forEach(([key, val]) => script.setAttribute(key, val))
        script.onload = script.onreadystatechange = () => {
          if (!script.readyState || /loaded|complete/.test(script.readyState)) resolve()
        }
        script.onerror = reject
        document.head.appendChild(script)
      }),
      getCSS: (url, id) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onload = link.onreadystatechange = () => {
          if (!link.readyState || /loaded|complete/.test(link.readyState)) resolve()
        }
        link.onerror = reject
        document.head.appendChild(link)
      }),
      addGlobalFn: (key, fn, name = false, parent = window) => {
        if (!false && key.startsWith('pjax')) return
        const globalFn = parent.globalFn || {}
        globalFn[key] = globalFn[key] || {}
        globalFn[key][name || Object.keys(globalFn[key]).length] = fn
        parent.globalFn = globalFn
      }
    }
  
      
      const activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      const activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }

      btf.activateDarkMode = activateDarkMode
      btf.activateLightMode = activateLightMode

      const theme = saveToLocal.get('theme')
    
          theme === 'dark' ? activateDarkMode() : theme === 'light' ? activateLightMode() : null
        
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        document.documentElement.classList.toggle('hide-aside', asideStatus === 'hide')
      }
    
      
    const detectApple = () => {
      if (/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)) {
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
  
    })()
  </script><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false,"highlightFullpage":false,"highlightMacStyle":true},
  copy: {
    success: '复制成功',
    error: '复制失败',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'null',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid/dist/infinitegrid.min.js',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: true,
  islazyloadPlugin: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'Android常用的消息传递机制',
  isHighlightShrink: false,
  isToc: true,
  pageType: 'post'
}</script><meta name="generator" content="Hexo 7.3.0"><link rel="alternate" href="/atom.xml" title="Hx's blog" type="application/atom+xml">
</head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img text-center"><img src="/img/head_pic_3.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data text-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">51</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">0</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">9</div></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url(/img/message_pic.jpg);"><nav id="nav"><span id="blog-info"><a class="nav-site-title" href="/"><span class="site-name">Hx's blog</span></a><a class="nav-page-title" href="/"><span class="site-name">Android常用的消息传递机制</span><span class="site-name"><i class="fa-solid fa-circle-arrow-left"></i><span>  返回首页</span></span></a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div><div id="toggle-menu"><span class="site-page"><i class="fas fa-bars fa-fw"></i></span></div></div></nav><div id="post-info"><h1 class="post-title">Android常用的消息传递机制</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2021-10-18T16:00:00.000Z" title="发表于 2021-10-19 00:00:00">2021-10-19</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2022-04-09T11:41:10.382Z" title="更新于 2022-04-09 19:41:10">2022-04-09</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/Android/">Android</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title=""><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">浏览量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="container post-content" id="article-container"><h1 id="Android常用的消息传递机制"><a href="#Android常用的消息传递机制" class="headerlink" title="Android常用的消息传递机制"></a>Android常用的消息传递机制</h1><h2 id="一、intent：Activity之间的跳转和数据传输"><a href="#一、intent：Activity之间的跳转和数据传输" class="headerlink" title="一、intent：Activity之间的跳转和数据传输"></a>一、intent：Activity之间的跳转和数据传输</h2><ul>
<li>内容：描述应用中一次操作的动作、动作涉及数据、附加数据等</li>
<li>对象 ：应用程序之间 &#x2F; 应用程序内部的Activity或Service之间的交互</li>
<li>特点：媒介中介，实现调用者与被调用者的解耦</li>
</ul>
<p>😎—用法—</p>
<ul>
<li>启动Activity：<strong>Context.startActivity()</strong> 或 <strong>Activity.startActivityForResult()</strong></li>
<li>启动服务：Context.startService() </li>
<li>通过广播方法发给broadcast receivers：Context.sendBroadcast(), Context.sendOrderedBroadcast()…</li>
</ul>
<p>😊—intent属性设置—</p>
<ol>
<li><p>Action（要执行的动作）：(SDK标准动作 &#x2F; 自定义动作)</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1.显示</span></span><br><span class="line">Uri uri = Uri.parse(<span class="string">&quot;http://google.com&quot;</span>); </span><br><span class="line">Intent it = <span class="keyword">new</span> Intent(Intent.ACTION_VIEW, uri); </span><br><span class="line">startActivity(it);</span><br><span class="line"><span class="comment">//2.打电话</span></span><br><span class="line">Uri uri = Uri.parse(<span class="string">&quot;tel:0800000123&quot;</span>); </span><br><span class="line">Intent it = <span class="keyword">new</span> Intent(Intent.ACTION_DIAL, uri); </span><br><span class="line">startActivity(it); </span><br><span class="line"><span class="comment">//&lt;uses-permission id=&quot;android.permission.CALL_PHONE&quot; /&gt; 要加上</span></span><br><span class="line"><span class="comment">//3.传送Email</span></span><br><span class="line">Intent it=<span class="keyword">new</span> Intent(Intent.ACTION_SEND);<span class="comment">//动作属性   </span></span><br><span class="line">String[] tos=&#123;<span class="string">&quot;me@abc.com&quot;</span>&#125;;   </span><br><span class="line">String[] ccs=&#123;<span class="string">&quot;you@abc.com&quot;</span>&#125;;   </span><br><span class="line">it.putExtra(Intent.EXTRA_EMAIL, tos);    <span class="comment">//附加属性</span></span><br><span class="line">it.putExtra(Intent.EXTRA_CC, ccs);   </span><br><span class="line">it.putExtra(Intent.EXTRA_TEXT, <span class="string">&quot;The email body text&quot;</span>);   </span><br><span class="line">it.putExtra(Intent.EXTRA_SUBJECT, <span class="string">&quot;The email subject text&quot;</span>);   </span><br><span class="line">it.setType(<span class="string">&quot;message/rfc822&quot;</span>);   		<span class="comment">//数据类型属性</span></span><br><span class="line">startActivity(Intent.createChooser(it, <span class="string">&quot;Choose Email Client&quot;</span>));</span><br><span class="line"><span class="comment">//4.播放新媒体</span></span><br><span class="line">Uri uri = Uri.parse(<span class="string">&quot;file:///sdcard/song.mp3&quot;</span>);	 <span class="comment">//url </span></span><br><span class="line">Intent it = <span class="keyword">new</span> Intent(Intent.ACTION_VIEW, uri); <span class="comment">//显示动作</span></span><br><span class="line">it.setType(<span class="string">&quot;audio/mp3&quot;</span>); 					   <span class="comment">//数据格式</span></span><br><span class="line">startActivity(it);</span><br></pre></td></tr></table></figure>
</li>
<li><p>Data（<strong>执行动作</strong>要操作的数据）：</p>
<p>Android中采用<u>指向数据的一个URL</u>。如在联系人应用中，一个指向某联系人的URI可能为：content:&#x2F;&#x2F;contacts&#x2F;1</p>
</li>
<li><p>type（数据类型）：显式指定Intent的数据类型。一般Intent的数据类型能够根据数据本身进行判定，而通过设置这个属性，可以强制采用显式指定的类型而不再进行推导</p>
</li>
<li><p>category（被执行动作的附加信息）：</p>
</li>
<li><p>component（组件）：</p>
<p>指定Intent的的目标组件的类名称。有指定的话，就不用根据属性来查找intent了。</p>
</li>
<li><p>extra（附加信息的集合）：</p>
</li>
</ol>
<p>😜—分类—</p>
<ul>
<li><p>显式intent：在构造对象时就指定接收者</p>
</li>
<li><p>隐式intent：构造intent对象时，不知道也不关心接收者是谁</p>
<ul>
<li><p>Android解析——将intent映射给接收者</p>
</li>
<li><p>解析机制：查找 已经注册在AndroidManifest.xml中的 所有IntentFilter——根据属性来判断——找到匹配的intent</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&lt;activity android:name=<span class="string">&quot;NotesList&quot;</span> android:label=<span class="string">&quot;@string/title_notes_list&quot;</span>&gt;</span><br><span class="line">    		<span class="comment">//1</span></span><br><span class="line">            &lt;intent-filter&gt;</span><br><span class="line">                &lt;action android:name=<span class="string">&quot;android.intent.action.MAIN&quot;</span> /&gt;</span><br><span class="line">                &lt;category android:name=<span class="string">&quot;android.intent.category.LAUNCHER&quot;</span> /&gt;</span><br><span class="line">            &lt;/intent-filter&gt;</span><br><span class="line">             <span class="comment">//2</span></span><br><span class="line">            &lt;intent-filter&gt;</span><br><span class="line">                &lt;action android:name=<span class="string">&quot;android.intent.action.VIEW&quot;</span> /&gt;</span><br><span class="line">                &lt;action android:name=<span class="string">&quot;android.intent.action.EDIT&quot;</span> /&gt;</span><br><span class="line">                &lt;action android:name=<span class="string">&quot;android.intent.action.PICK&quot;</span> /&gt;</span><br><span class="line">                &lt;category android:name=<span class="string">&quot;android.intent.category.DEFAULT&quot;</span> /&gt;</span><br><span class="line">                &lt;data android:mimeType=<span class="string">&quot;vnd.android.cursor.dir/vnd.google.note&quot;</span> /&gt;</span><br><span class="line">            &lt;/intent-filter&gt;</span><br><span class="line">             <span class="comment">//3</span></span><br><span class="line">            &lt;intent-filter&gt;</span><br><span class="line">                &lt;action android:name=<span class="string">&quot;android.intent.action.GET_CONTENT&quot;</span> /&gt;</span><br><span class="line">                &lt;category android:name=<span class="string">&quot;android.intent.category.DEFAULT&quot;</span> /&gt;</span><br><span class="line">                &lt;data android:mimeType=<span class="string">&quot;vnd.android.cursor.item/vnd.google.note&quot;</span> /&gt;</span><br><span class="line">            &lt;/intent-filter&gt;</span><br><span class="line">        &lt;/activity&gt;</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
<p>😍—Intent用法实例—</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1.无参数的Activity跳转</span></span><br><span class="line">Intent intent = <span class="keyword">new</span> Intent(Activity.Main.<span class="keyword">this</span>, Activity2.class);</span><br><span class="line">startActivity(intent);</span><br><span class="line"></span><br><span class="line"><span class="comment">//2.向下一个Activity传递数据(Bundle -&gt; Intent.putExtras)</span></span><br><span class="line">Intent intent = <span class="keyword">new</span> Intent(Activity.Main.<span class="keyword">this</span>, Activity2.class);</span><br><span class="line">Bundle bundle = <span class="keyword">new</span> Bundle();</span><br><span class="line">bundle.putString(<span class="string">&quot;name&quot;</span>,<span class="string">&quot;This is from MainActivity!&quot;</span>);</span><br><span class="line">intent.putExtras(bundle);</span><br><span class="line">startActivity(intent);		<span class="comment">//startActivityForResult(intent, REQUEST_CODE);</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//对数据的获取</span></span><br><span class="line">Bundle bundle = getIntent().getExtras();</span><br><span class="line">String name = bundle.getString(<span class="string">&quot;name&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//3.向上一个Activity返回结果</span></span><br><span class="line">Intent intent = getIntent();</span><br><span class="line">Bundle bundle = <span class="keyword">new</span> Bundle();</span><br><span class="line">bundle.putString(<span class="string">&quot;name&quot;</span>,<span class="string">&quot;This message is back!&quot;</span>);</span><br><span class="line">intent.putExtras(bundle);</span><br><span class="line">setResult(RESULT_OK, intent);<span class="comment">//针对第二种启动方法</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//4.回调上一个Activity的结果处理函数（onActivityResult）对不同结果的处理</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onActivityResult</span><span class="params">(<span class="keyword">int</span> requestCode, <span class="keyword">int</span> resultCode, Intent data)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.onActivityResult(requestCode, resultCode, data);</span><br><span class="line">        <span class="keyword">if</span> (requestCode==REQUEST_CODE)&#123;</span><br><span class="line">            <span class="keyword">if</span>(resultCode==RESULT_CANCELED)</span><br><span class="line">                  setTitle(<span class="string">&quot;cancle&quot;</span>);</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (resultCode==RESULT_OK) &#123;</span><br><span class="line">                 String temp=<span class="keyword">null</span>;</span><br><span class="line">                 Bundle bundle=data.getExtras();</span><br><span class="line">                 <span class="keyword">if</span>(bundle!=<span class="keyword">null</span>)   temp=bundle.getString(<span class="string">&quot;name&quot;</span>);</span><br><span class="line">                 setTitle(temp);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h2 id="二、onSaveInstance-onRestoreInstanceState-Activity状态的保存和恢复"><a href="#二、onSaveInstance-onRestoreInstanceState-Activity状态的保存和恢复" class="headerlink" title="二、onSaveInstance onRestoreInstanceState: Activity状态的保存和恢复"></a>二、onSaveInstance onRestoreInstanceState: Activity状态的保存和恢复</h2><p><img src="https://i.loli.net/2021/10/23/dvJ6Y8mtXhOgqbQ.png" alt="1336983672_6102.png"></p>
<ul>
<li><p>Activity的销毁和重建 </p>
<ul>
<li><p>正常情况：back键，与调用finish方法；</p>
</li>
<li><p>特殊情况：当Activity处于onStop状态时，如：退到后台，并且长时间不用时，极有可能会被系统回收，用来释放一些内存；</p>
</li>
<li><p>旋屏情况：如果Activity支持旋屏，每次旋屏都会导致activity的销毁与重建；</p>
</li>
<li><p>回调函数：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line">   <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onSaveInstanceState</span><span class="params">(Bundle outState)</span> </span>&#123;</span><br><span class="line">       <span class="keyword">super</span>.onSaveInstanceState(outState);</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>用户离开Activity——调用此函数——传递一个Bundle object——如果系统过会重建这个activity实例，会将这个Bundle object传到onRestoreInstanceState() 和 onCreate() 方法中去</p>
</blockquote>
</li>
</ul>
</li>
<li><p>恢复Activity状态</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line"> <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle savedInstanceState)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.onCreate(savedInstanceState);</span><br><span class="line">        .....</span><br><span class="line">        .....</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 如果程序唤醒了</span></span><br><span class="line">        <span class="keyword">if</span> (savedInstanceState != <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="comment">/*拿到数据后进行操作*/</span></span><br><span class="line">        &#125;</span><br><span class="line">  </span><br><span class="line"><span class="comment">//举例：</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SaveStateActivity</span> <span class="keyword">extends</span> <span class="title">Activity</span> </span>&#123;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String TAG = <span class="string">&quot;SaveStateActivity&quot;</span>;</span><br><span class="line"> </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle savedInstanceState)</span> </span>&#123;</span><br><span class="line">    	<span class="keyword">if</span> (savedInstanceState!=<span class="keyword">null</span>) &#123;</span><br><span class="line">    		Log.v(TAG, savedInstanceState.getString(<span class="string">&quot;data&quot;</span>));</span><br><span class="line">		&#125;</span><br><span class="line">        <span class="keyword">super</span>.onCreate(savedInstanceState);</span><br><span class="line">        setContentView(R.layout.main);</span><br><span class="line">        Log.v(TAG, <span class="string">&quot;onCreate&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onRestoreInstanceState</span><span class="params">(Bundle savedInstanceState)</span> </span>&#123;</span><br><span class="line">		Log.v(TAG, savedInstanceState.getString(<span class="string">&quot;data&quot;</span>));</span><br><span class="line">		<span class="keyword">super</span>.onRestoreInstanceState(savedInstanceState);</span><br><span class="line">		Log.v(TAG, <span class="string">&quot;onRestoreInstanceState&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onSaveInstanceState</span><span class="params">(Bundle outState)</span> </span>&#123;</span><br><span class="line">		outState.putString(<span class="string">&quot;data&quot;</span>, <span class="string">&quot;example&quot;</span>);</span><br><span class="line">		<span class="keyword">super</span>.onSaveInstanceState(outState);</span><br><span class="line">		Log.v(TAG, <span class="string">&quot;onSaveInstanceState&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onPause</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">super</span>.onPause();</span><br><span class="line">		Log.v(TAG, <span class="string">&quot;onPause&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onResume</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">super</span>.onResume();</span><br><span class="line">		Log.v(TAG, <span class="string">&quot;onResume&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">   	<span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onStart</span><span class="params">()</span> </span>&#123;</span><br><span class="line">   		<span class="keyword">super</span>.onStart();</span><br><span class="line">   		Log.v(TAG, <span class="string">&quot;onStart&quot;</span>);</span><br><span class="line">   	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onRestart</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">super</span>.onRestart();</span><br><span class="line">		Log.v(TAG, <span class="string">&quot;onRestart&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//还有id为editText1的editText</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>回到主页</p>
<p><img src="https://i.loli.net/2021/10/21/DPCOFoBteLjEqHd.png" alt="image-20211021191045506.png"></p>
<p>回到app，调用了onRestart方法，并没有调用 onRestoreInstanceState方法</p>
<p><img src="https://i.loli.net/2021/10/21/a8kvQtyMZF6lHUj.png" alt="image-20211021191255180.png"></p>
<p>back键，表明用户明确退出，直接退出没保存<img src="https://i.loli.net/2021/10/21/gzD7aWsvQK96R3t.png" alt="image-20211021191434961.png"></p>
<p>输入editText，旋转屏幕，仍可见，状态保存，说明UI是自动保存和恢复的（前提是给组件id）</p>
</li>
</ul>
<p><img src="https://i.loli.net/2021/10/21/FfS2Eg84RZaYDBz.png" alt="image-20211021191734476.png"></p>
<h2 id="三、callback-interface-接口回调机制"><a href="#三、callback-interface-接口回调机制" class="headerlink" title="三、callback interface 接口回调机制"></a>三、callback interface 接口回调机制</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//接口</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Callbacks</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">method</span><span class="params">(String a)</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//自己实现</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Myself</span> <span class="keyword">implements</span> <span class="title">Callbacks</span></span>&#123;</span><br><span class="line">    <span class="keyword">private</span> Others other = <span class="keyword">null</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">createOther</span><span class="params">()</span></span>&#123;</span><br><span class="line">        other = <span class="keyword">new</span> Others(<span class="keyword">this</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">method</span><span class="params">(String a)</span></span>&#123;</span><br><span class="line">        System.out(<span class="string">&quot;hello&quot;</span>+a);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//别人将回调接口传入,调用方法</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Others</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> Callbacks callback = <span class="keyword">null</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Others</span><span class="params">(Callbacks callback)</span></span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.callback = callback;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">getA</span><span class="params">(Callbacks callback)</span></span>&#123;</span><br><span class="line">        callback.method(<span class="string">&quot;I am waawa&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//测试</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">callbackTest</span><span class="params">()</span></span>&#123;</span><br><span class="line">    Others other = <span class="keyword">new</span> Others();</span><br><span class="line">    other.getA(Myself.<span class="keyword">this</span>);<span class="comment">//转型之类，待研究</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>callback.method()。利用接口变量 相当于通知 实现具体方法的类 实行操作。</li>
<li>优点：代码量小，很容易理解，处理效率高</li>
<li>缺点：不利于修改和扩展，接口一变更，发送方和接收方都需要修改参数。并且必须提供一个获取接口的入口。</li>
</ul>
<h2 id="四、broadcast-receiver"><a href="#四、broadcast-receiver" class="headerlink" title="四、broadcast receiver"></a>四、broadcast receiver</h2><ul>
<li><p>四大组件之一（Activity，Service，ContentProvider）</p>
</li>
<li><p>BroadcastReceiver：（系统内部）消息型组件，用于在不同的组件乃至不同的应用之间传递消息。</p>
<p>①广播注册：静态和动态注册。</p>
<p>​    静态👉在AndroidManifest中注册广播——广播应用安装时就被解析——不需要应用启动就可以收到广播</p>
<p>​    动态👉应用启动才能注册并接收广播</p>
<p>②特点：发送方并不关心接收方是否接到数据，也不关心接收方是如何处理数据的，通过这样的    形式来达到接、收双方的完全解耦合</p>
</li>
</ul>
<h3 id="广播接收者"><a href="#广播接收者" class="headerlink" title="广播接收者"></a>广播接收者</h3><ul>
<li>代码，onReceive方法</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyReceiver</span> <span class="keyword">extends</span> <span class="title">BroadcastReceiver</span></span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onReceive</span><span class="params">(Context context, Intent intent)</span></span>&#123;</span><br><span class="line">        Log.d(<span class="string">&quot;on receive action = &quot;</span> + intent.getAction());</span><br><span class="line">        String action = intent.getAction();</span><br><span class="line">        <span class="comment">//拿到intent该干嘛干嘛</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="广播注册者"><a href="#广播注册者" class="headerlink" title="广播注册者"></a>广播注册者</h3><ul>
<li><p>静态注册</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;receiver android:name = <span class="string">&quot;.Myreceiver&quot;</span>&gt;</span><br><span class="line">    &lt;intent-filter&gt;</span><br><span class="line">    	&lt;action android:name = <span class="string">&quot;com.ryg.receiver.LAUNCH&quot;</span>/&gt;</span><br><span class="line">    &lt;/intent-filter&gt;</span><br><span class="line"> &lt;/receiver&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>动态注册</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//IntentFilter就是提过的 隐式地启动系统组件的时候，就会根据IntentFilter来筛选出合适的进行启动</span></span><br><span class="line">IntentFilter filter = <span class="keyword">new</span> IntentFilter();</span><br><span class="line">filter.addAction(<span class="string">&quot;com.ryg.receiver.LAUNCH&quot;</span>);</span><br><span class="line">registerReceiver(<span class="keyword">new</span> MyReceiver(), filter);</span><br></pre></td></tr></table></figure>
</li>
<li><p>前两步完成之后，通过send方法来发送广播</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Intent intent = <span class="keyword">new</span> Intent();</span><br><span class="line">intent.setAction(<span class="string">&quot;com.ryg.receiver.LAUNCH&quot;</span>);</span><br><span class="line">sendBroadcast(intent);</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="🐱‍🏍举例"><a href="#🐱‍🏍举例" class="headerlink" title="🐱‍🏍举例"></a>🐱‍🏍举例</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*接收方*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ReceiverActivity</span> <span class="keyword">extends</span> <span class="title">AppCompatActivity</span></span>&#123;</span><br><span class="line">    <span class="keyword">private</span> TestReceiver receiver;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle savedInstanceState)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.onCreate(savedInstanceState);</span><br><span class="line">        <span class="comment">//注册。IntentFilter对象负责过滤掉组件无法响应和处理的Intent，只将自己关心的Intent接收进来进行处理</span></span><br><span class="line">        receiver = <span class="keyword">new</span> TestReceiver();</span><br><span class="line">        IntentFilter filter = <span class="keyword">new</span> IntentFilter(<span class="comment">/*这里填你自定义的这个广播过滤的名字NAME*/</span>);</span><br><span class="line">        registerReceiver(receiver, filter);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onDestroy</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.onDestroy();</span><br><span class="line">        <span class="comment">//为防止内存泄漏，需要及时注销接收器</span></span><br><span class="line">        unregisterReceiver(receiver);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestReceiver</span> <span class="keyword">extends</span> <span class="title">BroadcastReceiver</span> </span>&#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onReceive</span><span class="params">(Context context, Intent intent)</span> </span>&#123;</span><br><span class="line">            String type = intent.getStringExtra(<span class="comment">/*这里填你自定义的发送消息的类型TYPE*/</span>);</span><br><span class="line">            <span class="keyword">switch</span>(type)&#123;</span><br><span class="line">                <span class="keyword">case</span> <span class="string">&quot;TYPE1&quot;</span>:</span><br><span class="line">                    <span class="keyword">int</span> i = intent.getIntExtra(<span class="string">&quot;testInteger&quot;</span>, <span class="number">0</span>);</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span> <span class="string">&quot;TYPE2&quot;</span>:</span><br><span class="line">                    String s = intent.getStringExtra(<span class="string">&quot;testString&quot;</span>);</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">default</span>:</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*发送方*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SendService</span> <span class="keyword">extends</span> <span class="title">Service</span></span>&#123;<span class="comment">//??</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doSth1</span><span class="params">()</span></span>&#123;</span><br><span class="line">        Intent intent = <span class="keyword">new</span> Intent(<span class="comment">/*这里填刚才你写的那个NAME*/</span>);</span><br><span class="line">        intent.putExtra(<span class="comment">/*这里填刚才你写的那个消息类型TYPE*/</span>,<span class="string">&quot;TYPE1&quot;</span>);</span><br><span class="line">        intent.putExtra(<span class="string">&quot;testInteger&quot;</span>, <span class="number">1</span>);</span><br><span class="line">        sendBroadcast(intent);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doSth2</span><span class="params">()</span></span>&#123;</span><br><span class="line">        Intent intent = <span class="keyword">new</span> Intent(<span class="comment">/*这里填刚才你写的那个NAME*/</span>);</span><br><span class="line">        intent.putExtra(<span class="comment">/*这里填刚才你写的那个消息类型TYPE*/</span>,<span class="string">&quot;TYPE2&quot;</span>);</span><br><span class="line">        intent.putExtra(<span class="string">&quot;testString&quot;</span>, <span class="string">&quot;Hello world!&quot;</span>);</span><br><span class="line">        sendBroadcast(intent);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ul>
<li>优点：发送方和接收方实现了完全解耦，发送方将消息发送出去后，这条消息就与他无关了，收没收到也不管。 </li>
<li>缺点：广播的接收和发送得依赖context的环境。每次调用都需要写繁琐的intent和putExtra。数据传递方式类比handler，在接收时存在类型转换异常的风险。</li>
</ul>
<h2 id="五、observer-subject（观察者模式）"><a href="#五、observer-subject（观察者模式）" class="headerlink" title="五、observer-subject（观察者模式）"></a>五、observer-subject（观察者模式）</h2><ul>
<li><p>观察者接口</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Observer</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">newMsg</span><span class="params">(String msg)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>主题接口</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Subject</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">addObserver</span><span class="params">(Observer observer)</span></span>;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">removeObserver</span><span class="params">(Observer observer)</span></span>;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">notify</span><span class="params">(String msg)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>定义一个<strong>观察者管理类</strong>实现主题接口</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ObserverManager</span> <span class="keyword">implements</span> <span class="title">Subject</span></span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> ObserverManager instance = <span class="keyword">null</span>;</span><br><span class="line">    <span class="keyword">private</span> List&lt;Observer&gt; Observers = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">ObserverManager</span><span class="params">()</span></span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> ObserverManager <span class="title">getInstance</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">null</span> == instance) &#123;</span><br><span class="line">            <span class="keyword">synchronized</span> (ObserverManager.class) &#123;</span><br><span class="line">                <span class="keyword">if</span> (<span class="keyword">null</span> == instance) &#123;</span><br><span class="line">                    instance = <span class="keyword">new</span> ObserverManager();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> instance;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addObserver</span><span class="params">(Observer observer)</span></span>&#123;</span><br><span class="line">        Observers.add(observer);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">removeObserver</span><span class="params">(Observer observer)</span></span>&#123;</span><br><span class="line">        Observers.remove(observer);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">notify</span><span class="params">(String msg)</span></span>&#123;</span><br><span class="line">        <span class="keyword">for</span>(Observer observer: Observers)&#123;</span><br><span class="line">            observer.newMsg(msg);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>观察者即接收方：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ObserverActivity</span> <span class="keyword">extends</span> <span class="title">AppCompatActivity</span> <span class="keyword">implements</span> <span class="title">Observer</span></span>&#123;</span><br><span class="line">    <span class="comment">//获取manager</span></span><br><span class="line">    <span class="keyword">private</span> ObserverManager manager = ObserverManager.getInstance();</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle savedInstanceState)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.onCreate(savedInstanceState);</span><br><span class="line">        <span class="comment">//被纳入观察者队列</span></span><br><span class="line">        manager.addObserver(<span class="keyword">this</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onDestroy</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.onDestroy();</span><br><span class="line">        <span class="comment">//非常重要！！！！！！！！！！</span></span><br><span class="line">        manager.removeObserver(<span class="keyword">this</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//获取消息</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">newMsg</span><span class="params">(String msg)</span></span>&#123;</span><br><span class="line">        Log.e(<span class="string">&quot;Get a new msg&quot;</span>, msg);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>主题即发送方：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Sender</span></span>&#123;</span><br><span class="line">    <span class="keyword">private</span> ObserverManager manager = ObserverManager.getInstance();</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">sendNewMsg</span><span class="params">()</span></span>&#123;</span><br><span class="line">        manager.notify(<span class="string">&quot;This is a new msg from sender.&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>manager对观察者和发送者都进行了干预；可以随时增删观察者；</p>
</li>
<li><p>优点：同广播，高度解耦。接口自定义，扩展性强。<br>缺点：一对一时或者接收方数量少时，“杀鸡焉用牛刀”。接口修改时需要到处改动，同callback。</p>
</li>
</ul>
<p>参考博客：</p>
<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/feisky/archive/2010/01/16/1649081.html">Android Activity和Intent机制学习笔记 - feisky - 博客园 (cnblogs.com)</a></p>
<p><a target="_blank" rel="noopener" href="https://www.runoob.com/android/android-intents-filters.html">Android 意图(Intent)和过滤器(Filter) | 菜鸟教程 (runoob.com)</a></p>
<p><a target="_blank" rel="noopener" href="https://my.oschina.net/u/1389206/blog/1798642">Android四种常用的消息传递机制&#x2F;模式的比较 - 当空皓月的个人空间 - OSCHINA - 中文开源技术交流社区</a></p>
<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/whoislcj/p/5590615.html">Android消息传递之Handler消息机制 - 总李写代码 - 博客园 (cnblogs.com)</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/lixiang0522/article/details/7565401">(22条消息) Android中Activity状态的保存和恢复：onSaveInstanceState和onRestoreInstanceState方法_小何才露尖尖角-CSDN博客</a></p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>文章作者: </span><span class="post-copyright-info"><a href="https://huangxinhere.github.io">(●ˇ∀ˇ●)</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>文章链接: </span><span class="post-copyright-info"><a href="https://huangxinhere.github.io/2021/10/19/Android%E5%B8%B8%E7%94%A8%E7%9A%84%E6%B6%88%E6%81%AF%E4%BC%A0%E9%80%92%E6%9C%BA%E5%88%B6/">https://huangxinhere.github.io/2021/10/19/Android%E5%B8%B8%E7%94%A8%E7%9A%84%E6%B6%88%E6%81%AF%E4%BC%A0%E9%80%92%E6%9C%BA%E5%88%B6/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来源 <a href="https://huangxinhere.github.io" target="_blank">Hx's blog</a>！</span></div></div><div class="tag_share"><div class="post-share"><div class="social-share" data-image="/img/message_pic.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><a class="pagination-related" href="/2021/10/19/%E5%9B%9B%E5%A4%A7%E7%BB%84%E4%BB%B6/" title="Android 四大组件"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info"><div class="info-1"><div class="info-item-1">上一篇</div><div class="info-item-2">Android 四大组件</div></div><div class="info-2"><div class="info-item-1">四大组件的运行状态 Activity：（前台 ）展示型组件，向用户展示一个界面并且可以接收用户的输入信息进行交互。 ①面向用户； ②启动👈显式隐式intent； ③finish结束  Service：（后台执行）计算型组件，在后台执行一系列任务。 ①启动状态👉内部做后台计算； ②绑定状态👉后台计算＋和外界通信； ③停止：stopService和unBindService两个方法  BroadcastReceiver：（系统内部）消息型组件，用于在不同的组件乃至不同的应用之间传递消息。 ①广播注册：静态和动态注册。 ​    静态👉在AndroidManifest中注册广播——广播应用安装时就被解析——不需要应用启动就可以收到广播 ​    动态👉应用启动才能注册并接收广播 ②特点：发送方并不关心接收方是否接到数据，也不关心接收方是如何处理数据的，通过这样的    形式来达到接、收双方的完全解耦合  ContentProvider：数据共享型组件，用于向其他组件乃至其它应用共享数据。 ①内部维持着一份数据集合。增删查改   BroadcastReceiver的工作过程（注...</div></div></div></a><a class="pagination-related" href="/2021/10/10/deeply_touched_again/" title="Liu Cixin"><img class="cover" src="/img/liu_pic.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="info text-right"><div class="info-1"><div class="info-item-1">下一篇</div><div class="info-item-2">Liu Cixin</div></div><div class="info-2"><div class="info-item-1">Part one: the speechLadies and Gentleman, 女士们，先生们： Good evening! 晚上好！ It’s my great honor to receive the Clarke Award for Imagination in Service to Society. Thank you. 很荣幸获得克拉克想象力服务社会奖。 This award is a reward for imagination. Imagination is a capability that should have exclusive belonged to God but we, as human beings, luckily have this too. It is far beyond our imagination to grasp the meaning of the existence of imagination. A historian used to say that the main reason why human beings hav...</div></div></div></a></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info text-center"><div class="avatar-img"><img src="/img/head_pic_3.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info-name">(●ˇ∀ˇ●)</div><div class="author-info-description">该博客暂时停止维护，新博客传送门：https://juejin.cn/user/3598037753539256</div><div class="site-data"><a href="/archives/"><div class="headline">文章</div><div class="length-num">51</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">0</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">9</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/xxxxxx"><i class="fab fa-github"></i><span>Follow Me</span></a></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">This is my Blog</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#Android%E5%B8%B8%E7%94%A8%E7%9A%84%E6%B6%88%E6%81%AF%E4%BC%A0%E9%80%92%E6%9C%BA%E5%88%B6"><span class="toc-number">1.</span> <span class="toc-text">Android常用的消息传递机制</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%80%E3%80%81intent%EF%BC%9AActivity%E4%B9%8B%E9%97%B4%E7%9A%84%E8%B7%B3%E8%BD%AC%E5%92%8C%E6%95%B0%E6%8D%AE%E4%BC%A0%E8%BE%93"><span class="toc-number">1.1.</span> <span class="toc-text">一、intent：Activity之间的跳转和数据传输</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8C%E3%80%81onSaveInstance-onRestoreInstanceState-Activity%E7%8A%B6%E6%80%81%E7%9A%84%E4%BF%9D%E5%AD%98%E5%92%8C%E6%81%A2%E5%A4%8D"><span class="toc-number">1.2.</span> <span class="toc-text">二、onSaveInstance onRestoreInstanceState: Activity状态的保存和恢复</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%89%E3%80%81callback-interface-%E6%8E%A5%E5%8F%A3%E5%9B%9E%E8%B0%83%E6%9C%BA%E5%88%B6"><span class="toc-number">1.3.</span> <span class="toc-text">三、callback interface 接口回调机制</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9B%9B%E3%80%81broadcast-receiver"><span class="toc-number">1.4.</span> <span class="toc-text">四、broadcast receiver</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B9%BF%E6%92%AD%E6%8E%A5%E6%94%B6%E8%80%85"><span class="toc-number">1.4.1.</span> <span class="toc-text">广播接收者</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B9%BF%E6%92%AD%E6%B3%A8%E5%86%8C%E8%80%85"><span class="toc-number">1.4.2.</span> <span class="toc-text">广播注册者</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%F0%9F%90%B1%E2%80%8D%F0%9F%8F%8D%E4%B8%BE%E4%BE%8B"><span class="toc-number">1.4.3.</span> <span class="toc-text">🐱‍🏍举例</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%94%E3%80%81observer-subject%EF%BC%88%E8%A7%82%E5%AF%9F%E8%80%85%E6%A8%A1%E5%BC%8F%EF%BC%89"><span class="toc-number">1.5.</span> <span class="toc-text">五、observer-subject（观察者模式）</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2025/08/22/UE%E5%A4%9A%E4%BA%BA%E5%B0%84%E5%87%BBC++%EF%BC%881%EF%BC%89%E4%BA%92%E8%81%94%E7%BD%91%E8%81%94%E6%9C%BA%E8%AE%BE%E7%BD%AE/" title="UE与OnlineSubsystemSteam（OSS Steam）"><img src="https://cdn.jsdelivr.net/gh/huangxinhere/hexo_img/img/20250822000958_1.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="UE与OnlineSubsystemSteam（OSS Steam）"/></a><div class="content"><a class="title" href="/2025/08/22/UE%E5%A4%9A%E4%BA%BA%E5%B0%84%E5%87%BBC++%EF%BC%881%EF%BC%89%E4%BA%92%E8%81%94%E7%BD%91%E8%81%94%E6%9C%BA%E8%AE%BE%E7%BD%AE/" title="UE与OnlineSubsystemSteam（OSS Steam）">UE与OnlineSubsystemSteam（OSS Steam）</a><time datetime="2025-08-21T16:00:00.000Z" title="发表于 2025-08-22 00:00:00">2025-08-22</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/03/13/2024313-Unity-UI%EF%BC%882%EF%BC%89/" title="Unity-UI（2）"><img src="/img/unity.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Unity-UI（2）"/></a><div class="content"><a class="title" href="/2024/03/13/2024313-Unity-UI%EF%BC%882%EF%BC%89/" title="Unity-UI（2）">Unity-UI（2）</a><time datetime="2024-03-12T16:00:00.000Z" title="发表于 2024-03-13 00:00:00">2024-03-13</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/09/14/%E7%9F%A5%E8%AF%86%E6%95%B4%E7%90%86-Unity-%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/" title="Unity-性能优化"><img src="/img/unity.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Unity-性能优化"/></a><div class="content"><a class="title" href="/2023/09/14/%E7%9F%A5%E8%AF%86%E6%95%B4%E7%90%86-Unity-%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/" title="Unity-性能优化">Unity-性能优化</a><time datetime="2023-09-13T16:00:00.000Z" title="发表于 2023-09-14 00:00:00">2023-09-14</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/09/13/%E7%9F%A5%E8%AF%86%E6%95%B4%E7%90%86-Unity-%E5%9B%BE%E5%BD%A2/" title="Unity-图形"><img src="/img/unity.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Unity-图形"/></a><div class="content"><a class="title" href="/2023/09/13/%E7%9F%A5%E8%AF%86%E6%95%B4%E7%90%86-Unity-%E5%9B%BE%E5%BD%A2/" title="Unity-图形">Unity-图形</a><time datetime="2023-09-12T16:00:00.000Z" title="发表于 2023-09-13 00:00:00">2023-09-13</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/09/10/%E7%9F%A5%E8%AF%86%E6%95%B4%E7%90%86-Unity-%E7%83%AD%E6%9B%B4%E6%96%B0/" title="Unity-热更新"><img src="/2023/09/10/%E7%9F%A5%E8%AF%86%E6%95%B4%E7%90%86-Unity-%E7%83%AD%E6%9B%B4%E6%96%B0/message_pic.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Unity-热更新"/></a><div class="content"><a class="title" href="/2023/09/10/%E7%9F%A5%E8%AF%86%E6%95%B4%E7%90%86-Unity-%E7%83%AD%E6%9B%B4%E6%96%B0/" title="Unity-热更新">Unity-热更新</a><time datetime="2023-09-09T16:00:00.000Z" title="发表于 2023-09-10 00:00:00">2023-09-10</time></div></div></div></div></div></div></main><footer id="footer" style="background-image: url(/img/message_pic.jpg);"><div class="footer-other"><div class="footer-copyright"><span class="copyright">&copy;2025 By (●ˇ∀ˇ●)</span><span class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo 7.3.0</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly 5.4.0-b3</a></span></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="日间和夜间模式切换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><div class="js-pjax"></div><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>